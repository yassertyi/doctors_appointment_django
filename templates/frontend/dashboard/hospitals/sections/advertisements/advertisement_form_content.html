{% csrf_token %}

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">عنوان الإعلان</label>
    <div class="col-md-10">
        {{ form.title }}
        {% if form.title.errors %}
        <div class="text-danger">
            {% for error in form.title.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">وصف الإعلان</label>
    <div class="col-md-10">
        {{ form.description }}
        {% if form.description.errors %}
        <div class="text-danger">
            {% for error in form.description.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">الصورة الرئيسية</label>
    <div class="col-md-10">
        <!-- صورة الإعلان الحالية ستظهر هنا عند التعديل -->
        <div id="current-image-container" class="mb-2 d-none">
            <img id="current-image" src="" alt="" class="img-thumbnail" style="max-height: 200px;">
        </div>
        {{ form.image }}
        {% if form.image.errors %}
        <div class="text-danger">
            {% for error in form.image.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
        <small class="form-text text-muted">الصورة الرئيسية للإعلان (ستظهر في القائمة)</small>
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">صورة إضافية 1</label>
    <div class="col-md-10">
        {% if advertisement.image2 %}
        <div class="mb-2">
            <img src="{{ advertisement.image2.url }}" class="img-thumbnail" style="max-height: 200px;" alt="صورة إضافية 1">
            <button type="button" class="btn btn-sm btn-danger delete-additional-image mt-2" data-image-id="image2" data-ad-id="{{ advertisement.id }}">
                <i class="fas fa-trash"></i> حذف
            </button>
        </div>
        {% endif %}
        {{ form.image2 }}
        {% if form.image2.errors %}
        <div class="text-danger">
            {% for error in form.image2.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">صورة إضافية 2</label>
    <div class="col-md-10">
        {% if advertisement.image3 %}
        <div class="mb-2">
            <img src="{{ advertisement.image3.url }}" class="img-thumbnail" style="max-height: 200px;" alt="صورة إضافية 2">
            <button type="button" class="btn btn-sm btn-danger delete-additional-image mt-2" data-image-id="image3" data-ad-id="{{ advertisement.id }}">
                <i class="fas fa-trash"></i> حذف
            </button>
        </div>
        {% endif %}
        {{ form.image3 }}
        {% if form.image3.errors %}
        <div class="text-danger">
            {% for error in form.image3.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">صورة إضافية 3</label>
    <div class="col-md-10">
        {% if advertisement.image4 %}
        <div class="mb-2">
            <img src="{{ advertisement.image4.url }}" class="img-thumbnail" style="max-height: 200px;" alt="صورة إضافية 3">
            <button type="button" class="btn btn-sm btn-danger delete-additional-image mt-2" data-image-id="image4" data-ad-id="{{ advertisement.id }}">
                <i class="fas fa-trash"></i> حذف
            </button>
        </div>
        {% endif %}
        {{ form.image4 }}
        {% if form.image4.errors %}
        <div class="text-danger">
            {% for error in form.image4.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">تاريخ البدء</label>
    <div class="col-md-4">
        {{ form.start_date }}
        {% if form.start_date.errors %}
        <div class="text-danger">
            {% for error in form.start_date.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <label class="col-form-label col-md-2">تاريخ الانتهاء</label>
    <div class="col-md-4">
        {{ form.end_date }}
        {% if form.end_date.errors %}
        <div class="text-danger">
            {% for error in form.end_date.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
        <small class="form-text text-muted">اختياري: اتركه فارغاً إذا كان الإعلان غير محدد المدة</small>
    </div>
</div>

<div class="form-group row mb-3">
    <label class="col-form-label col-md-2">الحالة</label>
    <div class="col-md-4">
        {{ form.status }}
        {% if form.status.errors %}
        <div class="text-danger">
            {% for error in form.status.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>

<div class="form-group row mb-3">
    <div class="col-md-12 text-end">
        <a href="javascript:;" data-method="advertisements_list" data-section="advertisements_list" class="btn btn-secondary me-2 cancel-btn">إلغاء</a>
        <button type="submit" id="submit-advertisement" class="btn btn-primary">
            {% if is_edit %}تحديث الإعلان{% else %}إضافة الإعلان{% endif %}
        </button>
    </div>
</div>

{% if is_edit %}
<input type="hidden" name="advertisement_id" id="advertisement_id" value="{{ advertisement.id }}">
{% endif %}
